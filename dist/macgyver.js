!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],e);else{var n="object"==typeof exports?e(require("lodash")):e(t._);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,(function(t){return(()=>{"use strict";var e={8092:e=>{e.exports=t}},n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{r.r(o),r.d(o,{MacGyver:()=>dt});var t={};r.r(t),r.d(t,{$all:()=>K,$and:()=>Z,$elemMatch:()=>R,$eq:()=>I,$exists:()=>G,$gt:()=>J,$gte:()=>z,$in:()=>V,$lt:()=>L,$lte:()=>W,$mod:()=>B,$ne:()=>U,$nin:()=>M,$nor:()=>q,$not:()=>H,$options:()=>tt,$or:()=>T,$regex:()=>Q,$size:()=>Y,$type:()=>X,$where:()=>et});var e,n=r(8092),i=r.n(n),u=function(t){var e="[object "+t+"]";return function(t){return s(t)===e}},s=function(t){return Object.prototype.toString.call(t)},c=function(t){return t instanceof Date?t.getTime():a(t)?t.map(c):t&&"function"==typeof t.toJSON?t.toJSON():t},a=u("Array"),f=u("Object"),p=u("Function"),l=function(t,e){if(null==t&&t==e)return!0;if(t===e)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(a(t)){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!l(t[n],e[n]))return!1;return!0}if(f(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!l(t[o],e[o]))return!1;return!0}return!1},h=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),y=function(t,e,n,r,o,i){var u=e[r];if(a(t)&&isNaN(Number(u)))for(var s=0,c=t.length;s<c;s++)if(!y(t[s],e,n,r,s,t))return!1;return r===e.length||null==t?n(t,o,i):y(t[u],e,n,r+1,u,t)},g=function(){function t(t,e,n){this.params=t,this.owneryQuery=e,this.options=n,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.success=!1},t}(),d=function(t){function e(e,n,r,o){var i=t.call(this,e,n,r)||this;return i._children=o,i}return h(e,t),e.prototype.reset=function(){this.success=!1,this.done=!1;for(var t=0,e=this._children.length;t<e;t++)this._children[t].reset()},e.prototype.childrenNext=function(t,e,n){for(var r=!0,o=!0,i=0,u=this._children.length;i<u;i++){var s=this._children[i];if(s.next(t,e,n),s.success||(o=!1),s.done){if(!s.success)break}else r=!1}this.done=r,this.success=o},e}(g),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(d),w=function(t){function e(e,n,r,o,i){var u=t.call(this,n,r,o,i)||this;return u.keyPath=e,u._nextNestedValue=function(t,e,n){return u.childrenNext(t,e,n),!u.done},u}return h(e,t),e.prototype.next=function(t,e,n){y(t,this.keyPath,this._nextNestedValue,0,e,n)},e}(d),v=function(t,e){if(t instanceof Function)return t;if(t instanceof RegExp)return function(e){return"string"==typeof e&&t.test(e)};var n=c(t);return function(t){return e(n,c(t))}},b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this._test=v(this.params,this.options.compare)},e.prototype.next=function(t,e,n){this._test(t,e,n)&&(this.done=!0,this.success=!0)},e}(g),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.next=function(){this.done=!0,this.success=!1},e}(g),F=function(t){return e=function(e,n,r){var o=typeof c(e),i=t(e);return new b((function(t){return typeof c(t)===o&&i(t)}),n,r)},function(t,n,r){return null==t?new x(t,n,r):e(t,n,r)};var e},$=function(t,e,n,r){var o=r.operations[t];if(!o)throw new Error("Unsupported operation: "+t);return o(e,n,r)},j=function(t,e,n,r){if(function(t){for(var e in t)if("$"===e.charAt(0))return!0;return!1}(e)){var o=S(e,r),i=o[0];if(o[1].length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(t,e,n,r,i)}return new w(t,e,n,r,[new b(e,n,r)])},O=function(t,e,n){var r=S(t,n),o=r[0],i=r[1],u=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r}([new w([],t,e,n,o)],i);return 1===u.length?u[0]:new m(t,e,n,u)},S=function(t,e){var n,r=[],o=[];if(!(n=t)||n.constructor!==Object&&n.constructor!==Array&&"function Object() { [native code] }"!==n.constructor.toString()&&"function Array() { [native code] }"!==n.constructor.toString()||n.toJSON)return r.push(new b(t,t,e)),[r,o];for(var i in t)if("$"===i.charAt(0)){var u=$(i,t[i],t,e);null!=u&&r.push(u)}else o.push(j(i.split("."),t[i],t,e));return[r,o]},E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.init=function(){this._test=v(this.params,this.options.compare)},e.prototype.reset=function(){t.prototype.reset.call(this),this.success=!0},e.prototype.next=function(t){this._test(t)&&(this.done=!0,this.success=!1)},e}(g),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.init=function(){this._queryOperation=O(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){this._queryOperation.reset()},e.prototype.next=function(t,e,n){this._queryOperation.next(t,e,n),this.done=this._queryOperation.done,this.success=this._queryOperation.success},e}(g),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.success=!this.success},e}(A),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.init=function(){var t=this;this._ops=this.params.map((function(e){return O(e,null,t.options)}))},e.prototype.reset=function(){this.done=!1,this.success=!1;for(var t=0,e=this._ops.length;t<e;t++)this._ops[t].reset()},e.prototype.next=function(t,e,n){for(var r=!1,o=!1,i=0,u=this._ops.length;i<u;i++){var s=this._ops[i];if(s.next(t,e,n),s.success){r=!0,o=s.success;break}}this.success=o,this.done=r},e}(g),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.success=!this.success},e}(D),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.next=function(t,e,n){n.hasOwnProperty(e)===this.params&&(this.done=!0,this.success=!0)},e}(g),N=function(t){function e(e,n,r){return t.call(this,e,n,r,e.map((function(t){return O(t,n,r)})))||this}return E(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(d),I=function(t,e,n){return new b(t,e,n)},U=function(t,e,n){return new P(t,e,n)},T=function(t,e,n){return new D(t,e,n)},q=function(t,e,n){return new C(t,e,n)},R=function(t,e,n){return new A(t,e,n)},M=function(t,e,n){return new C(t,e,n)},V=function(t,e,n){return new D(t,e,n)},L=F((function(t){return function(e){return e<t}})),W=F((function(t){return function(e){return e<=t}})),J=F((function(t){return function(e){return e>t}})),z=F((function(t){return function(e){return e>=t}})),B=function(t,e,n){var r=t[0],o=t[1];return new b((function(t){return c(t)%r===o}),e,n)},G=function(t,e,n){return new k(t,e,n)},Q=function(t,e,n){return new b(new RegExp(t,e.$options),e,n)},H=function(t,e,n){return new _(t,e,n)},X=function(t,e,n){return new b((function(e){return null!=e&&(e instanceof t||e.constructor===t)}),e,n)},Z=function(t,e,n){return new N(t,e,n)},K=Z,Y=function(t,e,n){return new b((function(e){return e&&e.length===t}),e,n)},tt=function(){return null},et=function(t,e,n){var r;if(p(t))r=t;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in "$where" condition');r=new Function("obj","return "+t)}return new b((function(t){return r.bind(t)(t)}),e,n)};const nt=function(e,n){var r=void 0===n?{}:n,o=r.compare,i=r.operations;return function(t,e){var n=void 0===e?{}:e,r=n.operations,o=O(t,null,{compare:n.compare||l,operations:Object.assign({},r||{})});return function(t,e,n){return o.reset(),o.next(t,e,n),o.success}}(e,{compare:o,operations:Object.assign({},t,i)})};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){ot=function(t,e){return new i(t,void 0,e)};var n=ut(RegExp),r=RegExp.prototype,o=new WeakMap;function i(t,e,r){var i=n.call(this,t,e);return o.set(i,r||o.get(t)),i}function u(t,e){var n=o.get(e);return Object.keys(n).reduce((function(e,r){return e[r]=t[n[r]],e}),Object.create(null))}return it(i,n),i.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=u(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=o.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+n[e]})))}if("function"==typeof e){var i=this;return r[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==rt(t[t.length-1])&&t.push(u(t,i)),e.apply(this,t)}))}return r[Symbol.replace].call(this,t,e)},ot.apply(this,arguments)}function it(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}function ut(t){var e="function"==typeof Map?new Map:void 0;return(ut=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return st(t,arguments,ft(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),at(r,t)})(t)}function st(t,e,n){return(st=ct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&at(o,n.prototype),o}).apply(null,arguments)}function ct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt={widgets:{},$nextId:0,nextId:function(){return"mgForm".concat(gt.$nextId++)},forms:{}};gt.forms.setConfig=function(t,e){return gt.$forms[t]||(gt.$forms[t]={config:{},data:{}}),gt.$forms[t].config=gt.compileSpec(e).spec,gt},gt.forms.setData=function(t,e){return gt.$forms[t]||(gt.$forms[t]={config:{},data:{}}),gt.$forms[t].data=e,gt},gt.forms.validate=function(t){if(!gt.$forms[t])throw new Error("Invalid MacGyver form");return console.warn("FIXME: Validation not yet supported"),!0},gt.forms.emit=function(t,e){var n;if(!gt.$forms[t])throw new Error("Unknown form ID");for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(n=gt.$forms[t]).$emit.apply(n,[e].concat(o))},gt.forms.emitDown=function(t,e){var n;if(!gt.$forms[t])throw new Error("Unknown form ID");for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(n=gt.$forms[t]).$emitDown.apply(n,[e].concat(o))},gt.forms.getPath=function(t,e,n){return gt.utils.getPath(gt.$forms[t],e,n)},gt.forms.getPrototype=function(t){return gt.flatten(t,{type:"spec",want:"array",wantDataPath:!0}).reduce((function(t,e){return e.path&&e.default?(gt.utils.setPath(t,e.path,e.default),t):t}),{})},gt.notify={},gt.notify.loading=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;e&&n&&n.foreground?console.log("[$macgyver]","Loading foreground",t,{status:e}):e?console.log("[$macgyver]","Loading background",t,{status:e}):console.log("[$macgyver]","Stop loading",t,{status:e})},gt.notify.warn=function(t){return console.log("[$macgyver]","WARN",t)},gt.notify.error=function(t){return console.log("[$macgyver]",t)},gt.flatten=function(t,e){var n=i().defaults(e,{root:i().isArray(t)?gt.compileSpec(t).spec:t,maxDepth:0,filter:void 0,filterChildren:void 0,type:"auto",want:"object",wantDataPath:!1,wantSpec:!1,wantSpecPath:!1});if(n.filter&&!i().isFunction(n.filter)&&i().isObject(n.filter)&&(n.filter=i().matches(n.filter)),"object"!=n.want&&"array"!=n.want)throw new Error('$macgyver.flatten({want}) can only be "object" or "array"');if("auto"==n.type)if(n.root&&n.root.items)n.type="spec";else{if(!i().every(n.root,(function(t,e){return!e.items})))throw new Error("Cannot determine type of input object to $macgyver.flatten(), specify it explicitly with {type=spec|data}");n.type="data"}var r="object"==n.want?{}:[];return function t(e,o,u,s){if(i().isObject(e)){n.filter&&!n.filter.call(e,e,path,s)||(n.wantDataPath&&(e[i().isString(n.wantDataPath)?n.wantDataPath:"path"]=o.concat([e.id]).filter((function(t){return t})).join(".")),n.wantSpecPath&&(e[i().isString(n.wantSpecPath)?n.wantSpecPath:"specPath"]=u.join(".")),"object"==n.want?e.id&&(r[e.id]=e):r.push(e));var c="spec"==n.type?e.items:e;!i().isArray(c)||n.filterChildren&&!n.filterChildren.call(e,e,o,u,s)||n.maxDepth&&!(s<=n.maxDepth)||c.forEach((function(e,r){return t(e,o,u.concat("spec"==n.type?["items",r]:[r]),s+1)}))}}(n.root,[],[],0),r},gt.compileSpec=function(t,e){var n=ht({clone:!0,convertArray:!0,convertArrayWrapper:function(t){return{type:"mgContainer",showTitles:!1,items:t}},convertShorthand:!0,convertShorthandDetect:function(t){return i().isPlainObject(t)&&!i().has(t,"type")&&i().every(t,(function(t,e){return!(i().has(t,"id")||i().has(t,"type")&&"mgContainer"==t.type)}))},convertShorthandTranslate:function(t){return{type:"mgContainer",items:i().map(t,(function(t,e){var n;if(i().isString(t)&&(t={type:t}),null!==(n=t.type)&&void 0!==n&&n.startsWith("mg"))return t;if(i().isString(e)&&e.startsWith("mg"))return ht(ht({},t),{},{type:e});if(t.type){var r=t.type.toLowerCase(),o=i().find(gt.widgets,(function(t){return t.meta.id.substr(2).toLowerCase()==r||t.meta.shorthand.includes(r)}));return o?ht(ht({id:e},t),{},{type:o.meta.id}):{type:"mgError",text:'Unknown widget type "'.concat(t.type,'": ')+JSON.stringify(t,null,"\t")}}return i().isPlainObject(t)?ht(ht({id:e},t),{},{type:"mgText"}):{type:"mgError",text:"No widget type specified: "+JSON.stringify(t,null,"\t")}}))}},widgetDefaults:!0,widgetTitles:!0,deblank:!0},e);t=n.clone?i().cloneDeep(t):t,n.deblank&&i().isEmpty(t)&&(t={type:"mgContainer",items:[]}),n.convertArray&&i().isArray(t)&&(t=n.convertArrayWrapper(t)),n.convertShorthand&&n.convertShorthandDetect(t)&&(t=n.convertShorthandTranslate(t));var r=[];return gt.flatten(t,{type:"spec",want:"array",wantDataPath:"$dataPath",wantSpecPath:"$specPath"}).forEach((function(t){if(t.type&&gt.widgets[t.type]){if(n.widgetDefaults){var e,o;Object.assign(t,(o=gt.widgets[t.type].config,e=i().pickBy(o,(function(e,n){return!i().has(t,n)&&i().has(e,"default")})),i().mapValues(e,(function(t){return t.default}))))}}else console.log("Unknown widget '".concat(t.type,"'"),t),t={type:"mgError",text:'Unknown widget type "'.concat(t.type,'": ')+JSON.stringify(t)};t.show=null==t.show||!!t.show,t.showIf&&(t.showIf=gt.utils.evalCompile(t.showIf),r.push(t)),n.widgetTitles&&!t.title&&t.id&&(t.title=i().startCase(t.id))})),{spec:t,showIfs:r}},gt.$forms={},gt.utils={},gt.utils.global=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}(),gt.utils.fetch=function(t,e){return Promise.resolve().then((function(){return gt.$http||Promise.reject("No Axios compatible HTTP library - set $macgyver.$http to the library reference")})).then((function(){if(i().isPlainObject(t)){var n=[t.url,t];t=n[0],e=n[1]}else e.url=t;if(!t)throw new Error("Unknown URL to fetch")})).then((function(){return{mappings:{},parsedUrl:new URL(t,window.location),settings:ht({type:"object",mappings:{},format:function(t,e){return t},formatError:function(e){return"Unable to format data feed from ".concat(t," - ").concat(e.toString())}},e)}})).then((function(t){return i().isEmpty(e.mappings)?Array.from(t.parsedUrl.searchParams.entries()).forEach((function(e){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(n,r)||function(t,e){if(t){if("string"==typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];i.startsWith("$")&&(t.mappings[i.substr(1)]={required:!1,from:u},t.parsedUrl.searchParams.delete(i))})):t.mappings=e.mappings,t})).then((function(t){return gt.$http.get(t.parsedUrl.toString()).then((function(e){return t.response=e})).then((function(){return t}))})).then((function(e){switch(e.settings.type){case"array":if(!i().isArray(e.response.data))throw'Expected an array from data feed "'.concat(t,'" but got a non-array');return i().isEmpty(e.mappings)?e.output=e.response.data:e.output=e.response.data.map((function(t,n){return i().mapValues(e.mappings,(function(e,r){if(e.required&&void 0===t[e.from])throw new Error("Required field ".concat(e.from," is not present in data feed for item #").concat(n+1));return t[e.from]}))})),e;case"object":if(!i().isPlainObject(e.response.data))throw'Expected object return from data feed "'.concat(t,'" but got a non-plain-object');return i().isEmpty(e.mappings)?e.output=e.response.data:e.output=i().mapValues(e.mappings,(function(t,n){if(t.required&&void 0===e.response.data[n])throw new Error("Required field ".concat(n," is not present in data feed for item #").concat(itemIndex+1));return e.response.data[t.from]})),e;case"raw":return e.output=e.response.data,e}})).then((function(t){try{return t.settings.format(t.output,t)}catch(e){throw i().isString(t.settings.formatError)?t.settings.formatError:t.settings.formatError(e)}})).catch((function(t){throw gt.notify.error(t),t})).finally((function(){return gt.notify.loading(t,!1)}))},gt.utils.evalCompile=function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(i().isFunction(t)){if(!n)throw new Error("Cannot convert compiled Sift object back to an object - disable asFunc parameter");return t}if(i().isPlainObject(t))return n?nt(t):t;if(i().isString(t)&&(e=ot(/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\.0-9A-Z_a-z]+)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*==?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*!=[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*<=?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*>=?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+\$lte?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+\$gte?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,{left:1,operand:2,right:3}).exec(t))){var r;if(e.groups.operand=e.groups.operand.trim(),isFinite(e.groups.right)?e.groups.right=+e.groups.right:/^(["']).*\1$/.test(e.groups.right)&&(e.groups.right=e.groups.right.substr(1,e.groups.right.length-2)),i().isString(e.groups.right)&&"true"===e.groups.right.toLowerCase()&&(e.groups.right=!0),i().isString(e.groups.right)&&"false"===e.groups.right.toLowerCase()&&(e.groups.right=!1),["=","==","$eq"].includes(e.groups.operand))r=yt({},e.groups.left,e.groups.right);else{var o=["!=","$ne"].includes(e.groups.operand)?"$ne":[">","$gt"].includes(e.groups.operand)?"$gt":["<","$lt"].includes(e.groups.operand)?"$lt":[">=","$gte"].includes(e.groups.operand)?"$gte":["<=","$lte"].includes(e.groups.operand)?"$lte":function(t){throw t}(new Error('Unknown operand "'.concat(e.groups.operand,'" while parsing expression "').concat(t,'"')));r=yt({},e.groups.left,yt({},o,e.groups.right))}return n?nt(r):r}throw new Error('Error parsinng expression "'.concat(t,'", $macgyver.utils.evalCompile() can only process simple expressions for now, use Sift object syntax for more complex tests'))},gt.utils.evalMatch=function(t,e){return 1==[e].filter(gt.utils.evalCompile(t)).length},gt.utils.setPath=function(t,e,n,r){if(i().isString(t)||i().isArray(t)||void 0===n){var o=[void 0,t,e,n];t=o[0],e=o[1],n=o[2],r=o[3]}else if(!i().isObject(t))throw new Error("Cannot use $setPath on non-object target");var u=ht({arrayNumeric:!0,debug:!1,removeUndefined:!0},r);u.debug&&console.debug("[$setPath]",e,"=",n,{target:t,options:r});var s=t;if(!e)throw new Error("Cannot $setPath with undefined path");return(i().isString(e)?e.split("."):e).some((function(t,e,r){if(e!=r.length-1)return void 0===s[t]?(r.slice(e,r.length-1).forEach((function(t){u.arrayNumeric&&isFinite(t)?gt.utils.set(s,t,[]):gt.utils.set(s,t,{}),s=s[t]})),gt.utils.set(s,r[r.length-1],n),!0):(s=s[t],!1);u.removeUndefined&&void 0===n?gt.utils.unset(s,t):gt.utils.set(s,t,n)})),n},gt.utils.set=gt.utils.global.Vue?Vue.set:function(t,e,n){return t[e]=n},gt.utils.unset=gt.utils.global.Vue?Vue.unset:function(t,e){delete t[e]},gt.utils.getPath=function(t,e,n){return i().get(t,e,n)},gt.utils.incrementId=function(t){if(t){if(/[0-9]$/.test(t)){var e=ot(/^(.*)([0-9]+)$/,{prefix:1,numeric:2}).exec(t);return e.groups.prefix+(parseInt(e.groups.prefix)+1)}return t+"2"}return t};const dt=gt})(),o})()}));